/**
 * @file styles/objects/issue_toc.less
 *
 * Copyright (c) 2014-2021 Simon Fraser University
 * Copyright (c) 2003-2021 John Willinsky
 * Distributed under the GNU GPL v3. For full terms see the file docs/COPYING.
 *
 * @brief Styles applying to an issue table of contents view
 * @link templates/frontend/objects/issue_toc.tpl
 */
.obj_issue_toc {

	.cover {
		display: block;
		margin-bottom: @double;

		img {
			display: block;
			max-height: 250px;
			width: auto;
		}
	}
	.cover_main {
		display: block;
		margin-bottom: @double;

		img {
			//display: block;
			//max-height: 250px;
			width: 100%;
		}
		img:hover {
			opacity: 0.4;
			width: 100%;
		}
	}
	.description {

		> *:first-child {
			margin-top: 0;
		}

		> *:last-child {
			margin-bottom: 0;
		}
	}

	.pub_id {
		margin: @double 0;

		.type {
			font-weight: @bold;
		}
	}

	.published {
		margin: @double 0;

		.label {
			font-weight: @bold;
		}
	}

	.articles_main {
		&:extend(.pkp_unstyled_list);
		// Prevent articles from moving up into section divider
		// if the title of a section is omitted from the table of contents
		//margin-top: calc(~"@{triple} + @{double}");
		display: flex;
		flex-wrap: wrap;
		width: 100%;
		//outline: 2px dashed #ccc;
		flex: 1;
		min-width: 0;
		//display: flex;
		flex-direction: column;
		text-align: center;
		max-width: 1830px;

	}
	.articles_main:first-child > :last-child, .articles_main:last-child > :first-child {
		//flex-grow: 2;
	}
	h2 + .articles,
	h3 + .articles {
		margin-top: 0;
	}

	.sections:not(:first-child) {
		margin-top: @triple * 2;
		margin-top: 0;
	}

	.section_main:last-child .articles > li:last-child {
		margin-bottom: 0;
	}

	.galleys_links {
		&:extend(.pkp_unstyled_list);
		margin-top: @base;

		li {
			display: inline-block;
			margin-right: 1em;

			&:last-child {
				margin-right: 0;
			}
		}
	}

	@media(max-width: 992px) {

		.articles_main {
			&:extend(.pkp_unstyled_list);
			flex-direction: row;
			justify-content: space-around;
		}
	}
	@media(max-width: 768px) {
		.galleys,
		.section_main {
			position: relative;
			margin: @triple -@double;
			padding: @triple;
		}
	}
	@media(min-width: @screen-tablet) {

		//.articles_main {
		//	&:extend(.pkp_unstyled_list);
		//	flex-direction: row;
		//	justify-content: space-around;
		//}
		.heading {
			.pkp_helpers_clear;
		}

		.cover {
			float: left;
			width: 25%;
			height: auto;
			max-height: none;
			margin-right: @double;
		}

		.galleys,
		.section_main {
			position: relative;
			margin: @triple -@double;
			padding: @triple;

			//&:before {
			//	content: '';
			//	position: absolute;
			//	top: 45px;
			//	left: 0;
			//	width: 100%;
			//	border-top: @bg-border;
			//}

			> h2,
			> h3 {
				display: inline-block;
				position: relative;
				left: -15px;
				margin-top: 0;
				padding: 0 (@triple / 2);
				background: @lift;
				font-size: @font-bump;
				font-weight: @normal;
				line-height: @triple;
				color: @text-light;
			}
		}
	}

	@media(max-width: 1440px) {
		.articles_main {
			&:extend(.pkp_unstyled_list);
			max-width: 1200px;
		}
	}
	@media(min-width: @screen-desktop) {
		//.articles_main {
		//	&:extend(.pkp_unstyled_list);
		//	max-width: 1200px;
		//}

		.galleys,
		.section_main {
			margin: @triple -@triple;
			margin: unset;

			display: flex;
			//height: 500px;
			height: 1800px;
			justify-content: center;
		}

		.cover {
			margin-right: @triple;
			margin-bottom: @triple;

			img {
				max-height: none;
			}
		}
	}
}
